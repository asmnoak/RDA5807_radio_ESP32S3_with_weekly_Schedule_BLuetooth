<p><H3>�T�ԃX�P�W���[�����\��RDA5807 FM DSP���W�I(Bluetooth LE��)</H3></p>
<p>
�\��Bluetooth�ʐM�ɂ��ݒ肵���T�ԃX�P�W���[���Ɋ�Â��Ĕԑg�𒮂����Ƃ��ł���FM���W�I�𐻍삵���̂ŏЉ��B<br>
���p����RDA5807FP�́ARDA�}�C�N������FM�Ή���DSP���W�IIC�ł���B<a href="https://www.aitendo.com/product/4797">�����i�f�[�^�V�[�g�̎Q�ƃ����N����j</a>�ɍw���ł�<br>
SOP16�s���̃p�b�P�[�W�ŁA���g�p���i�����Ȃ��čςނ̂Ŏg���Ղ��B<br>
I2C�C���^�[�t�F�[�X�ŃR���g���[�����邪�A�����ł́A�ڕW�@�\���������邽�߂ɁABluetooth LE�iBLE�j�@�\�i�����WiFi�@�\�j�𓋍ڂ���<br>
<a href="https://www.switch-science.com/products/8968">Seeed Studio XIAO ESP32S3</a>�Ƒg�ݍ��킹���B<br>
RDA5807FP�͓d��3.3V�œ��삵�A�K�v�ȓd����20mA���x�Ȃ̂ŁAXIAO ESP32S3�i3V3�[�q�j���狟���ł���i5V�͕s�j�B<br>
XIAO ESP32S3�̐���ɂ�BLE�@�\�̃v���t�@�C���ł���uGATT�v�𗘗p���Ă���B���̍ہA�ʐM�̎�i�Ƃ��āAChrome�Ȃǂ�Web�u���E�U�Ɏ������ꂽ�uWeb bluetooth API�v���g�p����B<br>
�J����Arduino IDE 2.1�ōs�����B<br>

�g�p����RDA5807�p�̃��C�u�����́A<a href="https://github.com/pu2clr/RDA5807">������ipu2clr at GitHub�j</a>�ɂ���B<a href="https://pu2clr.github.io/RDA5807/#schematic">��H�}��</a>���f�ڂ���Ă���̂ŎQ�l�ɂ���Ɨǂ��B<br>
�Ȃ��AArduino IDE�̃��C�u�����Ǘ�������C���X�g�[���\�ł���B<br>
</p>
<p>
BLE�ł́A�Z���g�����i�����ł�PC�̃u���E�U�j�ƃy���t�F�����iESP32S3�j�ԂŒʐM���s���B�y���t�F�������ł́AGATT�Œ�`���ꂽ�u�f�[�^�\���v�̃T�[�r�X���\�z��<br>�A�h�o�^�C�Y�iAdvertise�j��ԂŎ�M�҂�����B
�Z���g����������́A�A�h�o�^�C�Y��Ԃ̃y���t�F�������X�L�������Đڑ��v�����s���B<br>
�����ł́A�֋X��A�u�f�[�^�\���v�Ƃ��āA�uGATT�v��"Current time service"�iUUID�Ŏ��ʂ���j�̒�`�𗬗p�����B<br>
�T�[�r�X�̃L�����N�^���X�e�B�b�N�ƃf�B�X�N���v�^�̓Z���g�����i�w���j������READ/WRITE�ł���̂ŁA�e�X���L�Ɏ������ړI�ŗ��p���Ă���B
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;�T�[�r�X:&nbsp;Current time service&nbsp;�\<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;�L�����N�^���X�e�B�b�N1&nbsp;�\&nbsp;XIAO ESP32S3�̑���ɗ��p<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;�f�B�X�N���v�^1&nbsp;�\&nbsp;�������ݎ��F�����ݒ肨���DSP���W�I�̑���A�u���E�U�ɕ\������Ă��郉�W�I�{�^���̗j���I���ƃ��W�I�ǑI���ɗ��p<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;�L�����N�^���X�e�B�b�N2&nbsp;�\&nbsp;�ǂݍ��ݎ��F�I�����ꂽ�j���̃X�P�W���[���̏���񋟁A�������ݎ��F�I�����ꂽ���W�I�ǂ̏�񂨂�їj���̃X�P�W���[���̐ݒ�<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;�L�����N�^���X�e�B�b�N3&nbsp;�\&nbsp;�ǂݍ��ݎ��F���W�I�ǂ̏����<br>
</p>
<p><strong>�@�\</strong><br>
 �E�T�ԃX�P�W���[����ݒ�ł���B�j�����ƂɁA�ԑg�̊J�n���ԁA�ԑg�̒����A���W�I�ǁA���ʁA�ԑg�I����ON/OFF��ݒ肷��B<br>
 �E������Web�u���E�U������̑���ŁAXIAO ESP32S3�ɓ`���A�����N���b�N�ɐݒ肷��B<br>
 �E�T�ԃX�P�W���[���̐ݒ�́APC�A�X�}�z���̃u���E�U����XIAO ESP32S3�ɃA�N�Z�X���čs���B<br>
 �E���l�ɁA���W�I�ǂ̑I�ǁA���ʂ̕ύX�A���W�I��ON/OFF�́A�u���E�U����s�����Ƃ��ł���B<br>
 �E�T�ԃX�P�W���[���̐ݒ�ɂ��A�ڊo�܂��@�\�A�X���[�v�@�\���\�ł���B<br>
 �EOLED�\�����u�ɁA���t�A�j���A�����A���ʁA���W�I��ON/OFF�A��M���g����\������B<br>
 �EXIAO ESP32S3�̓���̃s���Ƀ^�N�g�X�C�b�`��ڑ�����΁A�I�ǁA���ʒ��߁A���W�I��ON/OFF���\�ł���B<br>
 �E��M���g���͈̔͂́A76�|108MHz�ŁA���C�hFM�Ή��ł���B<br>
 �E�o�͂̓I�[�f�B�I�W���b�N�o�R�ŏ����a�̃X�s�[�J�[�i�X�e���I�j��ڑ�����B<br>
</p>
<p><strong>H/W�\��</strong><br>
 �ESeeed Studio XIAO ESP32S3 - �R���g���[��<br>
 �EI2C�ڑ�&nbsp; RDA5807FP<br>
 �EI2C�ڑ�&nbsp; SSD1306 64x32 OLED�\�����u<br>
 �EXtal���U��i32768Hz�j�A�R���f���T�A��R�ށA�I�[�f�B�I�W���b�N�A�z����<br>
</p>
<p>
<img src="./xiao_esp32s3_rda5807_ble.jpg" width="480" height="480"><br>
��p�̊�iXIAO_ESP32C3�̕��𗬗p�B<a href="https://www.pcbway.com/project/shareproject/RDA5807_FM_DSP_radio_with_weekly_schedule_which_is_controlled_by_XIAO_ESP32C3_dbd09236.html">��̃f�[�^</a>�j�Ɏ����B�E����XIAO ESP32S3�A������RDA5807FP�B
</p>
<p><strong>�ڑ�</strong><br>
�e�R���|�[�l���g�̐ڑ��͈ȉ��̒ʂ�B<br>
<p>
<table> 
<tr>
<td>I2C&nbsp;</td><td>XIAO(����)</td>
</tr>
<tr>
<td>SCK</td><td>GPIO6</td>
</tr>
<tr>
<td>SDA</td><td>GPIO5</td>
</tr>
</table>
</p>
<p>
<table> 
<tr>
<td>�^�N�g�X�C�b�`</td><td>XIAO</td>
</tr>
<tr>
<td>����</td><td>GPIO2</td>
</tr>
<tr>
<td>�I��</td><td>GPIO3</td>
</tr>
<tr>
<td>PON/POFF</td><td>GPIO4</td>
</tr>
</table>
</p>
</p>
<p>
I2C�̃A�h���X
<table> 
<tr>
<td>RDA5807FP</td><td>0x10&nbsp;or&nbsp;0x11&nbsp;���C�u�����Ŋ���</td>
</tr>
<tr>
<td>OLED</td><td>0x3C&nbsp;����</td>
</tr>
</table>
</p>
<p><strong>������@</strong><br>
�u���E�U����A"Web_Bluetooth_Radio_Sched.html" �t�@�C���ɃA�N�Z�X�i�h���b�O���h���b�v�j����ƈȉ��̉�ʂ��\�������B<br>
���쎞�ɂ͖���A"Connect to ESP32"�{�^���������āAESP32�ɐڑ�����K�v������BESP32�Ƃ̐ڑ��͖�30�b�ێ������̂ŁA���̊Ԃɑ�����s���B<br>
"Connect to ESP32"�{�^���������ƁABluetooth�f�o�C�X�̃X�L�����E�B���h�E���\�������̂�"ESP32S3_X"��I������B<br>
�ڑ�������"Set current time to ESP32 RTC"�A���ʁA�I�ǁA�d��ON/OFF�Ȃǂ̑���{�^����������悤�ɂȂ�B<br>
"Set current time to ESP32 RTC"�{�^���́AESP32�Ɍ��ݎ�����ݒ肷�邽�߁A�d��ON���Ɉ�񂾂������K�v������B<br>
�m���Ӂn"ESP32S3_X"��PC���̃f�o�C�X���X�g�ɍڂ�Ɛڑ��ł��Ȃ��Ȃ�̂ŁA���̏ꍇ�̓f�o�C�X���X�g����폜����B

<p>
<img src="./weekly_schedule_ble.png" width="900" height="560"><br>
</p>
</p>
<p><strong>FM�ǂ̏����ݒ�</strong><br>
�ŏ��ɁA�n��̎�M�\��FM�ǂ̏��i���g���Ƌǖ��j��ݒ肷��K�v������B<br>
�܂��A"Radio Stations"�̃��W�I�{�^����"0"���N���b�N����Ɠ��͈�ɏ����l�i�_�~�[�l�j���\�������̂�<br>
"ST0"�ɑ����A���g��(MHz)�Ƌǖ�(���p5�����܂�)���C�����A"Save Station Info"�{�^���������ƕۑ������B<br>
�K�v�ɉ����āA���W�I�{�^����"1"����"6"�܂ŌJ��Ԃ�(���W�I�ǂ̔ԍ��ɂȂ�B�ő�7�ǐݒ�\)�B
</p>
<p><strong>�T�ԃX�P�W���[���̐ݒ���@</strong><br>
�X�P�W���[���͗j�����Ƃɐݒ肷��B�e�j�����Ƃ̒���\����������Ɏw�肷��B<br>
1�G���g���̍��ڂ́A�ԑg�J�n�����A���W�I�ǁi�ԍ��j�A�������ԁi���j�A���ʁi0-8�j�A�ԑg�I����ɓd��OFF�i1�̎��j�ł���B<br>
�Ⴆ�΁A"22:00,1,119,2,1;"�́A�u�ԑg�J�n������22:00�A���W�I�ǂ̔ԍ���1�A�������Ԃ�119���A���ʂ�2�A�ԑg�I����ɓd��OFF�v���Ӗ�����B�Ō��";"�͋�؂蕶���ł���B<br>
"Schedule of Week"�̉��ɂ���e�j���̃��W�I�{�^�����N���b�N����ƁA���݂̓��e�i�ŏ��̓_�~�[�l�j���A���͗̈�ɕ\�������̂ŁA�����ҏW����B<br>
�ҏW��A"Save schedule day of  Week"�{�^�����N���b�N����ƁA�ݒ���e���ۑ������B<br>
�ݒ���e�Ɍ`����̊ԈႢ������ꍇ�́A�G���[���\������A�ۑ�����Ȃ��B�Ȃ��A�e�ԑg�̊J�n�����ƏI�������͕��P�ʂŏd�Ȃ�Ȃ��悤�Ɏw�肷�邱�ƁB<br>
</p>
<p><strong>���s���̃��O���b�Z�[�W�ɂ���</strong><br>
"Live Output"�Ɏ��s���̃��O���b�Z�[�W���\�������B�Ⴆ�΁APC����BLE�f�o�C�X���Ȃ��ꍇ�͈ȉ��̃��b�Z�[�W���\�������B
<p>
"Requesting any Bluetooth Device...<br>
Argh! NotFoundError: Bluetooth adapter not available."
</p>
</p>
<p><strong>�C���X�g�[��</strong><br>
<ol>
<li>�R�[�h���AZIP�`���Ń_�E�����[�h�A�K���ȃt�H���_�ɓW�J����B</li>
<li>ArduinoIDE�ɂ����āA���C�u�����}�l�[�W������ȉ����������ăC���X�g�[������</li>
 <ul>
  <li>Adafruit_BusIO</li>
  <li>Adafruit_GFX</li>
  <li>Adafruit_SSD1306</li>
  <li>RDA5807</li>
 </ul>
<li>�ǉ��̃��C�u�������AZIP�`���Ń_�E�����[�h�A���C�u�����}�l�[�W������C���X�g�[������</li>
 <ul>
  <li>TimeLib&nbsp;:&nbsp; https://github.com/PaulStoffregen/Time</li>
 </ul>
<li>ArduinoIDE����xiao_esp32s3_BLE_clock_radio_RDA5807_master.ino���J��</li>
<li>�u���؁E�R���p�C���v�ɐ���������A��U�A�u���O��t���ĕۑ��v���s��</li>
<li>��L��H/W�\���A�ڑ��ł���΃X�P�b�`�C���̕K�v�͂Ȃ��B</li>
</ol>
</p>
<p><strong>�኱�̉��</strong><br>
�E��H�}��RDA5807FP�̃f�[�^�V�[�g���Q�Ƃ̂��ƁBLOUT�AROUT�̃R���f���T��100�|200��F���x��ڑ�����Ɖ������ǂ��Ȃ�B<br>
&nbsp;&nbsp;�Ȃ��A��H�}�ɂ���C���_�N�^���X�n�̕��i�͖����Ă����삷��B<br>
&nbsp;&nbsp;�Q�l�܂łɎ��ۂɓ��삳����RDA5807FP���̉�H�}�����Ɏ������B<br>
�E1���Ɏw��ł���ԑg�̐���9�܂łł���i�X�P�b�`���C�����đ��₷�ꍇ�͎��ȐӔC�ł��肢���܂��j�B<br>
&nbsp;&nbsp;�������W�I�ǂ̔ԑg�𑱂��Ē����ꍇ�́A�������Ԃ����Z���āA1�G���g���Ŏw�肷��΂悢�B<br>
&nbsp;&nbsp;�Ȃ��A�[��0�����ׂ��������́A���̗j���Ɏw�肷��B<br>
<p>
<img src="./rda5807_connection.png" width="460" height="360"><br>
</p>
</p>
<p><strong>���ӎ���</strong><br>
�E�����ۏ؂�����̂ł͂���܂���̂ŁA���p�̍ۂ́A���ȐӔC�ł��y���݂��������B<br>
</p>
